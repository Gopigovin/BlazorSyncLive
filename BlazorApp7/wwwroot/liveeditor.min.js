var model, view, controller, vie, mm, cont;

window.exampleJsFunctions = {
    initialize: function (dotnetObj) {
        model = CodeMirror.fromTextArea(document.getElementById("pageCode"), {
            mode: 'text/x-csharp',
            lineNumbers: true
        });

        view = CodeMirror.fromTextArea(document.getElementById("viewCode"), {
            mode: 'text/html',
            lineNumbers: true
        });
        controller = CodeMirror.fromTextArea(document.getElementById("controllerCode"), {
            mode: 'text/html',
            lineNumbers: !0,
            autoCloseTags: !0,
            extraKeys: {
                "Ctrl-Space": "autocomplete"
            },
            styleActiveLine: !0
        });
        //document.getElementById("runbutton").addEventListener("click", function () {
        //    var mm = model.getValue();
        //    var vie = view.getValue();
        //    var cont = controller.getValue();
        //    var getValue = { pages: vie, startup: mm, host: cont };
        //    dotnetObj.invokeMethodAsync("onBuild", getValue);
        //});
    },
    RunButtonClick: function (dotnetObj) {
        ejs.popups.createSpinner({ target: document.getElementById("output_loader") });
        ejs.popups.showSpinner(document.getElementById("output_loader"));
        var mm = model.getValue();
        var vie = view.getValue();
        var cont = controller.getValue();
        var getValue = { pages: mm, startup: vie, host: cont };
        dotnetObj.invokeMethodAsync("onBuild", getValue);
    },


    renderIframe: function (dotnetObj) {
        document.getElementById("iframe").innerHTML = '<iframe src="http://localhost:5000" id="output" style="width: 100%; height: 400px; border: 0px;"></iframe>';
        ejs.popups.hideSpinner(document.getElementById("output_loader"));
    },

    outputLog: function (logs) {
        var areaEle;
        if (!document.getElementById("outputlogs").querySelector('textarea')) {
            areaEle = document.createElement('textarea');
            areaEle.setAttribute("rows", "10");
            areaEle.setAttribute("cols", "100%");
            areaEle.setAttribute("style", "width:100%;height:100%;");
        } else {
            areaEle = document.getElementById("outputlogs").querySelector('textarea')
        }
        if (!logs.includes('dotnet') && !logs.includes('task') && !logs.includes('BlazorAppServer>') && !logs.includes('BlazorApp7') && !logs.includes('\Users')) {
                areaEle.value += logs + "\n"; 
            document.getElementById("outputlogs").appendChild(areaEle);
        }
    }
}
 
 
 