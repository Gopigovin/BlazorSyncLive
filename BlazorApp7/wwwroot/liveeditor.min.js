var model, view, controller, vie, mm, cont;

window.exampleJsFunctions = {
    initialize: function (dotnetObj) {
        //model = CodeMirror.fromTextArea(document.getElementById("pageCode"), {
        //    mode: 'text/x-csharp',
        //    lineNumbers: true
        //});

        //view = CodeMirror.fromTextArea(document.getElementById("viewCode"), {
        //    mode: 'text/html',
        //    lineNumbers: true
        //});
        //controller = CodeMirror.fromTextArea(document.getElementById("controllerCode"), {
        //    mode: 'text/html',
        //    lineNumbers: !0,
        //    autoCloseTags: !0,
        //    extraKeys: {
        //        "Ctrl-Space": "autocomplete"
        //    },
        //    styleActiveLine: !0
        //});
        //this.RunButtonClick(dotnetObj);
        //document.getElementById("runbutton").addEventListener("click", function () {
        //    var mm = model.getValue();
        //    var vie = view.getValue();
        //    var cont = controller.getValue();
        //    var getValue = { pages: vie, startup: mm, host: cont };
        //    dotnetObj.invokeMethodAsync("onBuild", getValue);
        //});
    },
    tabFirstContent: function (dotnetObj) {
        model = CodeMirror.fromTextArea(document.getElementById("pageCode"), {
            mode: 'text/html',
            lineNumbers: true
        });
    },



    tabSecondContent: function (dotnetObj) {
        view = CodeMirror.fromTextArea(document.getElementById("controllerCode"), {
            mode: 'text/html',
            lineNumbers: true
        });
        controller = CodeMirror.fromTextArea(document.getElementById("viewCode"), {
            mode: 'text/html',
            lineNumbers: !0,
            autoCloseTags: !0,
            extraKeys: {
                "Ctrl-Space": "autocomplete"
            },
            styleActiveLine: !0
        });
    }, 
    setFirstContent: function (controlPage) {
        controller.getWrapperElement().parentNode.removeChild(controller.getWrapperElement());
        controller = null;
        view = CodeMirror.fromTextArea(document.getElementById("controllerCode"), {
            mode: 'text/html',
            lineNumbers: true
        });
        controller = CodeMirror.fromTextArea(document.getElementById("viewCode"), {
            mode: 'text/html',
            lineNumbers: !0,
            autoCloseTags: !0,
            extraKeys: {
                "Ctrl-Space": "autocomplete"
            },
            styleActiveLine: !0
        });
    },

    setSecondContent: function (controlPage) {
        view.getWrapperElement().parentNode.removeChild(view.getWrapperElement());
        view = null;
        controller = CodeMirror.fromTextArea(document.getElementById("viewCode1"), {
            mode: 'text/html',
            lineNumbers: !0,
            autoCloseTags: !0,
            extraKeys: {
                "Ctrl-Space": "autocomplete"
            },
            styleActiveLine: !0
        });
    },
    setControl: function (controlPage) {
        document.getElementById("pageCode").value = controlPage;
        model.setValue(controlPage);
    },
    RunButtonClick: function (dotnetObj) {
        //model = CodeMirror.fromTextArea(document.getElementById("pageCode"), {
        //    mode: 'text/x-csharp',
        //    lineNumbers: true
        //});

        //view = CodeMirror.fromTextArea(document.getElementById("viewCode"), {
        //    mode: 'text/html',
        //    lineNumbers: true
        //});
        //controller = CodeMirror.fromTextArea(document.getElementById("controllerCode"), {
        //    mode: 'text/html',
        //    lineNumbers: !0,
        //    autoCloseTags: !0,
        //    extraKeys: {
        //        "Ctrl-Space": "autocomplete"
        //    },
        //    styleActiveLine: !0
        //});
        ejs.popups.createSpinner({ target: document.getElementById("output_loader") });
        ejs.popups.showSpinner(document.getElementById("output_loader"));
        var mm = model.getValue();
        var vie = view.getValue();
        var cont = controller.getValue();
        var getValue = { pages: mm, startup: vie, host: cont };
        dotnetObj.invokeMethodAsync("onBuild", getValue);
    },
    renderIframe: function (dotnetObj) {
        document.getElementById("iframe").innerHTML = '<iframe src="http://localhost:5000" id="output" style="width: 100%; height: 400px; border: 0px;"></iframe>';
        ejs.popups.hideSpinner(document.getElementById("output_loader"));
    },

    outputLog: function (logs) {
        var areaEle;
        if (!document.getElementById("outputlogs").querySelector('textarea')) {
            areaEle = document.createElement('textarea');
            areaEle.setAttribute("rows", "10");
            areaEle.setAttribute("cols", "100%");
            areaEle.setAttribute("style", "width:100%;height:100%;");
        } else {
            areaEle = document.getElementById("outputlogs").querySelector('textarea')
        }
        if (!logs.includes('dotnet') && !logs.includes('task') && !logs.includes('BlazorAppServer>') && !logs.includes('BlazorApp7') && !logs.includes('\Users')) {
                areaEle.value += logs + "\n"; 
            document.getElementById("outputlogs").appendChild(areaEle);
        }
    }
}
 
 
 